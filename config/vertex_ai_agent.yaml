# Vertex AI Agent Builder Deployment Configuration
# SOL - Sophisticated Operational Lattice

apiVersion: dialogflow.cloud.google.com/v3
kind: Agent
metadata:
  name: sol-orchestrator
  displayName: "SOL - Sophisticated Operational Lattice"
  
spec:
  defaultLanguageCode: en
  timeZone: America/New_York
  
  # Agent Settings
  settings:
    enableStackdriverLogging: true
    enableInteractionLogging: true
    securitySettings:
      redactionStrategy: REDACT_WITH_SERVICE
      
  # Generative AI Settings  
  generativeSettings:
    generativeAiModel: gemini-1.5-pro
    generativeSafetySettings:
      - category: HARM_CATEGORY_HARASSMENT
        threshold: BLOCK_MEDIUM_AND_ABOVE
      - category: HARM_CATEGORY_HATE_SPEECH
        threshold: BLOCK_MEDIUM_AND_ABOVE
      - category: HARM_CATEGORY_SEXUALLY_EXPLICIT
        threshold: BLOCK_MEDIUM_AND_ABOVE
      - category: HARM_CATEGORY_DANGEROUS_CONTENT
        threshold: BLOCK_MEDIUM_AND_ABOVE

---
# Playbooks for SOL Lattice Nodes

apiVersion: dialogflow.cloud.google.com/v3
kind: Playbook
metadata:
  name: strategic-op-playbook
  displayName: "Strategic Operations Playbook"
spec:
  goal: |
    Coordinate mission-level operations across the SOL lattice.
    Handle strategic planning, objective setting, and cross-node orchestration.
  steps:
    - text: "Receive and analyze mission parameters"
    - text: "Validate against FREQ LAW constraints (response time < 2000ms)"
    - text: "Request k=3 quorum consensus if required"
    - text: "Execute strategic coordination"
    - text: "Log operation to BigQuery audit trail"

---
apiVersion: dialogflow.cloud.google.com/v3
kind: Playbook
metadata:
  name: gov-engine-playbook
  displayName: "Governance Engine Playbook"
spec:
  goal: |
    Enforce FREQ LAW compliance and exercise VETO authority.
    Ensure all operations meet governance requirements.
  steps:
    - text: "Evaluate operation against FREQ LAW"
    - text: "Check response time constraint (< 2000ms)"
    - text: "Verify k=3 quorum consensus if required"
    - text: "Confirm BigQuery audit trail is configured"
    - text: "Exercise VETO if compliance fails"
    - text: "Approve operation if all checks pass"

---
apiVersion: dialogflow.cloud.google.com/v3
kind: Playbook
metadata:
  name: spci-playbook
  displayName: "SPCI Continuous Improvement Playbook"
spec:
  goal: |
    Manage continuous improvement cycles for evolutionary optimization.
    Track metrics, run experiments, and identify improvement opportunities.
  steps:
    - text: "Collect performance metrics"
    - text: "Analyze trends and patterns"
    - text: "Identify improvement opportunities"
    - text: "Design and run experiments"
    - text: "Evaluate results and iterate"

---
apiVersion: dialogflow.cloud.google.com/v3
kind: Playbook
metadata:
  name: legacy-architect-playbook
  displayName: "Legacy Architect Playbook"
spec:
  goal: |
    Translate and integrate legacy systems with modern architecture.
    Handle protocol translation, data transformation, and migration planning.
  steps:
    - text: "Analyze legacy system interfaces"
    - text: "Design protocol adapters"
    - text: "Implement data transformations"
    - text: "Create migration plans"
    - text: "Validate integration"

---
# Tools for SOL Operations

apiVersion: dialogflow.cloud.google.com/v3
kind: Tool
metadata:
  name: freq-law-validator
  displayName: "FREQ LAW Validator"
spec:
  toolType: CUSTOMIZED
  specification:
    parameters:
      type: object
      properties:
        operation:
          type: string
          description: "Name of the operation to validate"
        response_time_ms:
          type: number
          description: "Response time in milliseconds"
        quorum_count:
          type: integer
          description: "Number of quorum approvals"
        has_audit_trail:
          type: boolean
          description: "Whether audit logging is configured"
      required:
        - operation

---
apiVersion: dialogflow.cloud.google.com/v3
kind: Tool
metadata:
  name: quorum-consensus
  displayName: "Quorum Consensus Manager"
spec:
  toolType: CUSTOMIZED
  specification:
    parameters:
      type: object
      properties:
        action:
          type: string
          enum: ["initiate", "vote", "check_status"]
          description: "Consensus action to perform"
        round_id:
          type: string
          description: "Consensus round ID"
        vote:
          type: string
          enum: ["approve", "reject", "abstain"]
          description: "Vote type"
      required:
        - action

---
apiVersion: dialogflow.cloud.google.com/v3
kind: Tool
metadata:
  name: bigquery-audit
  displayName: "BigQuery Audit Logger"
spec:
  toolType: CUSTOMIZED
  specification:
    parameters:
      type: object
      properties:
        operation:
          type: string
          description: "Operation name to log"
        node_id:
          type: string
          description: "Node ID performing the operation"
        payload:
          type: object
          description: "Operation payload data"
        success:
          type: boolean
          description: "Whether operation succeeded"
      required:
        - operation
        - node_id
