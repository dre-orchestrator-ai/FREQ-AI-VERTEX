# Vertex AI Agent Builder Deployment Configuration
# SOL - Sophisticated Operational Lattice

apiVersion: dialogflow.cloud.google.com/v3
kind: Agent
metadata:
  name: sol-orchestrator
  displayName: "SOL - Sophisticated Operational Lattice"
  
spec:
  defaultLanguageCode: en
  timeZone: America/New_York
  
  # Agent Settings
  settings:
    enableStackdriverLogging: true
    enableInteractionLogging: true
    securitySettings:
      redactionStrategy: REDACT_WITH_SERVICE
      
  # Generative AI Settings  
  generativeSettings:
    generativeAiModel: gemini-1.5-pro
    generativeSafetySettings:
      - category: HARM_CATEGORY_HARASSMENT
        threshold: BLOCK_MEDIUM_AND_ABOVE
      - category: HARM_CATEGORY_HATE_SPEECH
        threshold: BLOCK_MEDIUM_AND_ABOVE
      - category: HARM_CATEGORY_SEXUALLY_EXPLICIT
        threshold: BLOCK_MEDIUM_AND_ABOVE
      - category: HARM_CATEGORY_DANGEROUS_CONTENT
        threshold: BLOCK_MEDIUM_AND_ABOVE

---
# Playbooks for SOL Lattice Nodes

apiVersion: dialogflow.cloud.google.com/v3
kind: Playbook
metadata:
  name: strategic-op-playbook
  displayName: "Strategic Operations Playbook"
spec:
  goal: |
    Coordinate mission-level operations across the SOL lattice.
    Handle strategic planning, objective setting, and cross-node orchestration.
  steps:
    - text: "Receive and analyze mission parameters"
    - text: "Validate against FREQ LAW constraints (response time < 2000ms)"
    - text: "Request k=3 quorum consensus if required"
    - text: "Execute strategic coordination"
    - text: "Log operation to BigQuery audit trail"

---
apiVersion: dialogflow.cloud.google.com/v3
kind: Playbook
metadata:
  name: gov-engine-playbook
  displayName: "Governance Engine Playbook"
spec:
  goal: |
    Enforce FREQ LAW compliance and exercise VETO authority.
    Ensure all operations meet governance requirements.
  steps:
    - text: "Evaluate operation against FREQ LAW"
    - text: "Check response time constraint (< 2000ms)"
    - text: "Verify k=3 quorum consensus if required"
    - text: "Confirm BigQuery audit trail is configured"
    - text: "Exercise VETO if compliance fails"
    - text: "Approve operation if all checks pass"

---
apiVersion: dialogflow.cloud.google.com/v3
kind: Playbook
metadata:
  name: spci-playbook
  displayName: "SPCI Continuous Improvement Playbook"
spec:
  goal: |
    Manage continuous improvement cycles for evolutionary optimization.
    Track metrics, run experiments, and identify improvement opportunities.
  steps:
    - text: "Collect performance metrics"
    - text: "Analyze trends and patterns"
    - text: "Identify improvement opportunities"
    - text: "Design and run experiments"
    - text: "Evaluate results and iterate"

---
apiVersion: dialogflow.cloud.google.com/v3
kind: Playbook
metadata:
  name: legacy-architect-playbook
  displayName: "Legacy Architect Playbook"
spec:
  goal: |
    Translate and integrate legacy systems with modern architecture.
    Handle protocol translation, data transformation, and migration planning.
  steps:
    - text: "Analyze legacy system interfaces"
    - text: "Design protocol adapters"
    - text: "Implement data transformations"
    - text: "Create migration plans"
    - text: "Validate integration"

---
# Maritime Barge Drafting Playbook (vector_gamma)

apiVersion: dialogflow.cloud.google.com/v3
kind: Playbook
metadata:
  name: maritime-barge-ops-playbook
  displayName: "Maritime Barge Drafting Operations Playbook"
spec:
  goal: |
    Execute autonomous maritime barge draft survey operations.
    Replace manual surveyors and drone flyovers with IoT sensor fusion
    and AI-driven analysis. Follow SCAN > PROCESS > REPORT workflow.
    Target accuracy: 0.998. Enforce USCG/IMO regulatory compliance.
  steps:
    - text: "Register vessel with physical specifications (LOA, beam, depth, displacement)"
    - text: "Ingest IoT sensor data from ultrasonic draft sensors (fore, midship, aft)"
    - text: "Compute draft survey using Simpson's rule (mean draft, trim, displacement)"
    - text: "Calculate cargo weight from displacement minus light displacement"
    - text: "Optimize ballast distribution for even keel and stability"
    - text: "Assess vessel stability (metacentric height, righting lever)"
    - text: "Validate against maritime regulations (IMO Load Line, USCG 46 CFR, IMO A.749)"
    - text: "Request k=3 governance consensus for safety-critical operations"
    - text: "Generate operational report with cost analysis vs traditional methods"
    - text: "Log all operations to BigQuery audit trail"

---
# Tools for SOL Operations

apiVersion: dialogflow.cloud.google.com/v3
kind: Tool
metadata:
  name: freq-law-validator
  displayName: "FREQ LAW Validator"
spec:
  toolType: CUSTOMIZED
  specification:
    parameters:
      type: object
      properties:
        operation:
          type: string
          description: "Name of the operation to validate"
        response_time_ms:
          type: number
          description: "Response time in milliseconds"
        quorum_count:
          type: integer
          description: "Number of quorum approvals"
        has_audit_trail:
          type: boolean
          description: "Whether audit logging is configured"
      required:
        - operation

---
apiVersion: dialogflow.cloud.google.com/v3
kind: Tool
metadata:
  name: quorum-consensus
  displayName: "Quorum Consensus Manager"
spec:
  toolType: CUSTOMIZED
  specification:
    parameters:
      type: object
      properties:
        action:
          type: string
          enum: ["initiate", "vote", "check_status"]
          description: "Consensus action to perform"
        round_id:
          type: string
          description: "Consensus round ID"
        vote:
          type: string
          enum: ["approve", "reject", "abstain"]
          description: "Vote type"
      required:
        - action

---
apiVersion: dialogflow.cloud.google.com/v3
kind: Tool
metadata:
  name: bigquery-audit
  displayName: "BigQuery Audit Logger"
spec:
  toolType: CUSTOMIZED
  specification:
    parameters:
      type: object
      properties:
        operation:
          type: string
          description: "Operation name to log"
        node_id:
          type: string
          description: "Node ID performing the operation"
        payload:
          type: object
          description: "Operation payload data"
        success:
          type: boolean
          description: "Whether operation succeeded"
      required:
        - operation
        - node_id

---
# Maritime-specific Tools

apiVersion: dialogflow.cloud.google.com/v3
kind: Tool
metadata:
  name: draft-survey-calculator
  displayName: "Draft Survey Calculator"
spec:
  toolType: CUSTOMIZED
  specification:
    parameters:
      type: object
      properties:
        vessel_id:
          type: string
          description: "Vessel identifier"
        fore_draft_m:
          type: number
          description: "Fore draft reading in meters"
        mid_draft_m:
          type: number
          description: "Midship draft reading in meters"
        aft_draft_m:
          type: number
          description: "Aft draft reading in meters"
        water_temp_c:
          type: number
          description: "Water temperature in Celsius"
        salinity_ppt:
          type: number
          description: "Water salinity in parts per thousand"
        water_depth_m:
          type: number
          description: "Channel water depth in meters"
      required:
        - vessel_id
        - fore_draft_m
        - mid_draft_m
        - aft_draft_m

---
apiVersion: dialogflow.cloud.google.com/v3
kind: Tool
metadata:
  name: ballast-optimizer
  displayName: "Ballast Optimization Engine"
spec:
  toolType: CUSTOMIZED
  specification:
    parameters:
      type: object
      properties:
        vessel_id:
          type: string
          description: "Vessel identifier"
        target_trim_m:
          type: number
          description: "Target trim in meters (0 = even keel)"
        target_list_deg:
          type: number
          description: "Target list angle in degrees (0 = upright)"
      required:
        - vessel_id

---
apiVersion: dialogflow.cloud.google.com/v3
kind: Tool
metadata:
  name: maritime-compliance-checker
  displayName: "Maritime Regulatory Compliance Checker"
spec:
  toolType: CUSTOMIZED
  specification:
    parameters:
      type: object
      properties:
        survey_id:
          type: string
          description: "Draft survey ID to validate"
        regulations:
          type: array
          items:
            type: string
          description: "Regulatory standards to check against"
      required:
        - survey_id
